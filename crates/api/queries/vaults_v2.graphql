query GetVaultsV2(
  $first: Int
  $skip: Int
  $where: VaultV2sFilters
  $orderBy: VaultV2OrderBy
  $orderDirection: OrderDirection
) {
  vaultV2s(first: $first, skip: $skip, where: $where, orderBy: $orderBy, orderDirection: $orderDirection) {
    items {
      id
      address
      name
      symbol
      listed
      whitelisted
      chain {
        id
        network
      }
      asset {
        address
        symbol
        decimals
        name
        priceUsd
      }
      curator {
        address
      }
      owner {
        address
      }
      totalAssets
      totalAssetsUsd
      totalSupply
      sharePrice
      performanceFee
      managementFee
      avgApy
      avgNetApy
      apy
      netApy
      liquidity
      liquidityUsd
      adapters {
        items {
          __typename
          id
          address
          type
          assets
          assetsUsd
          ... on MorphoMarketV1Adapter {
            positions {
              items {
                supplyAssets
                supplyShares
                market {
                  uniqueKey
                  lltv
                  state {
                    supplyAssets
                    borrowAssets
                    supplyShares
                    borrowShares
                    timestamp
                    fee
                    rateAtTarget
                    price
                  }
                }
              }
            }
          }
          ... on MetaMorphoAdapter {
            metaMorpho {
              state {
                allocation {
                  supplyAssets
                  supplyCap
                  enabled
                  supplyQueueIndex
                  withdrawQueueIndex
                  market {
                    uniqueKey
                    lltv
                    state {
                      supplyAssets
                      borrowAssets
                      supplyShares
                      borrowShares
                      timestamp
                      fee
                      rateAtTarget
                      price
                    }
                  }
                }
              }
            }
          }
        }
      }
      rewards {
        asset {
          address
          symbol
        }
        supplyApr
        yearlySupplyTokens
      }
      warnings {
        type
        level
      }
    }
    pageInfo {
      count
      countTotal
    }
  }
}

query GetVaultV2ByAddress($address: String!, $chainId: Int!) {
  vaultV2ByAddress(address: $address, chainId: $chainId) {
    id
    address
    name
    symbol
    listed
    whitelisted
    chain {
      id
      network
    }
    asset {
      address
      symbol
      decimals
      name
      priceUsd
    }
    curator {
      address
    }
    owner {
      address
    }
    totalAssets
    totalAssetsUsd
    totalSupply
    sharePrice
    performanceFee
    managementFee
    avgApy
    avgNetApy
    apy
    netApy
    liquidity
    liquidityUsd
    adapters {
      items {
        __typename
        id
        address
        type
        assets
        assetsUsd
        ... on MorphoMarketV1Adapter {
          positions {
            items {
              supplyAssets
              supplyShares
              market {
                uniqueKey
                lltv
                state {
                  supplyAssets
                  borrowAssets
                  supplyShares
                  borrowShares
                  timestamp
                  fee
                  rateAtTarget
                  price
                }
              }
            }
          }
        }
        ... on MetaMorphoAdapter {
          metaMorpho {
            state {
              allocation {
                supplyAssets
                supplyCap
                enabled
                supplyQueueIndex
                withdrawQueueIndex
                market {
                  uniqueKey
                  lltv
                  state {
                    supplyAssets
                    borrowAssets
                    supplyShares
                    borrowShares
                    timestamp
                    fee
                    rateAtTarget
                    price
                  }
                }
              }
            }
          }
        }
      }
    }
    rewards {
      asset {
        address
        symbol
      }
      supplyApr
      yearlySupplyTokens
    }
    warnings {
      type
      level
    }
  }
}
